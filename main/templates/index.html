{% extends "base.html" %}
{% block start %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spline 3D Model</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <iframe src="https://my.spline.design/pillanddnaanimation-1312b8dab64af0cebbb8e91646ce732b/" allowfullscreen></iframe>
</body>
</html>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    // Add to cart functionality
    $('.add-to-cart').click(function() {
        const button = $(this);
        const productName = button.data('product-name');
        const price = button.data('price');
        
        $.ajax({
            url: '{% url "add_to_cart" %}',
            type: 'POST',
            data: {
                'product_name': productName,
                'price': price,
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.status === 'success') {
                    $('#cart-count').text(response.cart_count);
                    button.html('Added to Cart').addClass('btn-success').removeClass('btn-primary');
                    setTimeout(() => {
                        button.html('Book Now').addClass('btn-primary').removeClass('btn-success');
                    }, 2000);
                }
            }
        });
    });

    // Countdown timer functionality
    function updateTimer() {
        const countdownEl = document.getElementById('countdown');
        let [hours, minutes, seconds] = countdownEl.textContent.split(':').map(Number);
        
        setInterval(() => {
            if (seconds > 0) {
                seconds--;
            } else if (minutes > 0) {
                minutes--;
                seconds = 59;
            } else if (hours > 0) {
                hours--;
                minutes = 59;
                seconds = 59;
            }
            
            countdownEl.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }, 1000);
    }

    updateTimer();
});
$('#searchInput').on('input', function() {
    const searchTerm = $(this).val().toLowerCase().trim();
    
    $('.searchable-item').each(function() {
        const $item = $(this);
        const titleText = $item.find('.card-title').text().toLowerCase();
        const descriptionText = $item.find('.card-text').text().toLowerCase();
        const priceText = $item.find('.h4').text().toLowerCase();
        
        const searchableText = `${titleText} ${descriptionText} ${priceText}`;
        const matches = searchableText.includes(searchTerm);
        
        $item.toggle(matches);
    });

    // Show "No results found" message if no items are visible
    const visibleItems = $('.searchable-item:visible').length;
    if (visibleItems === 0 && searchTerm !== '') {
        if ($('#no-results').length === 0) {
            $('.row.g-4').after('<div id="no-results" class="text-center mt-4"><p class="text-muted">No matches found</p></div>');
        }
    } else {
        $('#no-results').remove();
    }
});
</script>

<style>
.hover-shadow-lg {
    transition: box-shadow 0.3s ease-in-out;
}
.hover-shadow-lg:hover {
    box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important;
}
.transition-shadow {
    transition: all 0.3s ease;
}
.card {
    background: var(--dark-card);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

</style>
{% endblock %}